# 计算机的组成与工作原理

Composition and working principle of computer

------

## 1.3.1 冯·诺依曼体系结构

冯·诺伊曼（1912-1957年），布达佩斯大学数学博士，美籍匈牙利数学家，在ENIAC的研制中期，冯·诺伊曼参与了原子弹的研制工作，他带着原子弹研制过程中遇到的大量计算问题加入到计算机的研制工作中。

1945年6月底，冯·诺伊曼执笔写出了EDVAC计划草案，提出了计算机中采用二进制算法和设置内存储器的理论，并明确规定了电子计算机必须由运算器、控制器、存储器、输入输出设备等五大部分组成的基本结构形式。他认为，计算机采用二进制算法和内存储器后，指令和数据便可以一起存放在存储器中，可以使计算机的结构大大简化，并且为实现运算控制自动化和提高运算速度提供良好的条件。

冯·诺伊曼的主要贡献是提出了“存储程序控制”的工作原理。该思想的要点是：程序由二进制指令构成，所有指令都是以操作码和地址码的形式存放在存储器中，以运算器和控制器为中心，顺序执行指令所规定的操作。

冯·诺依曼设计思想可以简要的概括为以下4点：

**（1）计算机应包括运算器、存储器、控制器3个核心部件，以及输入设备和输出设备。**输入设备负责把人工编制的指令以及需要处理的数据输入到存储器中；输出设备负责把存储器里的计算结果输出（显示）

**（2）计算机的数制采用二进制。**

**（3）程序的每条指令一般具有一个操作码和一个地址码。**操作码表示运算性质，如加法或者除法；地址码指出操作数在存储器中的位置。

**（4）将编好的程序和原始数据送入存储器，然后启动计算机工作。**计算机可以在不需要操作人员干预的情况下，自动逐条取出指令和执行指令，并最终完成整个任务。

## 1.3.2 五大基本部件

冯·诺伊曼机的硬件系统主要由五大基本部件组成：**运算器**、**控制器**、**存储器**、**输入设备**和**输出设备**。

这五大部件通过系统总线完成指令所传达的操作，当计算机接受指令后，由控制器指挥，将数据从输入设备传送到存储器中存放，再由控制器将需要参加运算的数据传送到运算器中，由运算器进行处理，处理后的结果由输出设备输出。

下面简要介绍计算机的五大基本部件：

### 1.运算器

运算器又称**算术逻辑单元**（Arithmetic Logic Unit，ALU）。

运算器主要任务是执行各种**算术运算**和**逻辑运算**。算数运算是指各种数值运算，如加、减、乘、除等。逻辑运算是进行逻辑判断的非数值运算，如与、或、非、比较、移位等。

计算机所完成的全部运算都是在运算器中进行的。根据指令规定的寻址方式，运算器从存储器或寄存器中取得操作数，进行计算后，送回到指令所指定的寄存器中。

运算器的核心部件是加法器和若干寄存器，加法器用于计算，寄存器用于存储参加运算的各种数据以及运算后的结果。

### 2.控制器

控制器是对输入的指令进行分析，并统一控制计算机的各个部分完成一定任务的部件。

它一般由**指令寄存器**、**状态寄存器**、**指令译码器**、**时序电路**和**控制电路**组成。

计算机的工作方式是执行程序，程序就是为完成某一任务所编制的特定的指令序列，各种指令按一定的时间关系有序安排，控制器产生各种最基本的不可再分的微操作的命令信号，即微命令，以指挥整个计算机有条不紊地工作。

当计算机执行程序时，控制器首先从程序计数器中取得指令的地址，并将下一条指令的地址存入程序计数器中，然后从存储器中取出指令，由指令译码器对指令进行译码后产生控制信号，用以驱动相应的硬件完成指令操作。

简而言之，控制器就是协调指挥计算机各部分工作的部件，它的基本任务是根据指令的要求，综合有关逻辑条件与时间条件产生相应的微指令。

### 3.存储器

存储器由大量的记忆单元组成，记忆单元是一种具有两个稳定状态的物理器件，可用来表示二进制的0和1，这种物理器件一般由半导体器件或磁性材料等构成。

存储器分为**内存储器**（简称内存或主存）、**外存储器**（简称外存或辅存）、**缓冲存储器**（简称缓存）。

内存储器一般由半导体存储器构成，通常装在主板上，主要用来存放计算机正在执行的或经常使用的程序和数据。CPU可以直接访问内存储器，执行程序时就是从内存储器中毒取指令，并且在内存储器中存取数据的。内存储器的特点是存取速度快，但容量有限，大小受到地址总线位数的限制。

外存储器用来存放不经常使用的程序和数据，CPU不能直接访问它。外存储器属于计算机的外围设备，是为弥补内存储器容量不足而配置的。它的特点是容量大，成本低，但存取速度慢，通常使用DMA（Direct Memory Access）技术和IOP（I/O Processor）技术来实现内存储器和外存储器之间的数据直接传送。

缓冲存储器位于内存储器与CPU之间，其存取速度非常快，当存储容量更小，一般用来解决存取速度与存储容量之间的矛盾，以提高整个系统的运行速度。

### 4.输入设备

输入设备用来接受用户输入的原始数据和程序，并将它们转换为计算机能识别的二进制信息存入内存储器中。

常用的输入设备有键盘、鼠标、扫描仪、光笔等。

### 5.输出设备

输出设备用于将内存储器中的由计算机处理的结果转变为人们能接受的形式输出。

常用的输出设备有显示器、打印机、绘图仪等。

## 1.3.3 计算机的工作原理

### 1.计算机基本工作原理

计算机的基本工作原理是存储程序和程序控制。程序与数据都存储在内存储器中，CPU按照程序编排的顺序，一步一步地取出指令，自动完成指令规定地操作，这是计算机地基本工作原理。

具体描述如下：

**（1）将程序和原始数据通过输入设备送入存储器。**

**（2）启动运行后，计算机从存储器中取出程序指令送到控制器去识别，分析该指令要做什么事。**

**（3）控制器根据指令的含义发出相应的命令（如加法、减法），将存储单元存放的操作数据取出送往运算器进行运算，再把运算结果送回指定的存储器单元。**

**（4）当运算任务完成后，就可以根据指令将结果通过输出设备输出。**

计算机的工作过程实际上就是快速地执行指令地过程。指令执行时，必须先装入计算机内存储器，CPU负责从内存储器中逐条取出指令，并对指令分析译码，判断该条指令要完成地操作，向各部件发出完成操作的控制信号，从而完成一条指令地执行。总之，计算机的基本工作过程就是不断地重复取指令、分析指令及取数、执行指令，如此周而复始，直到遇到停机指令或外来事件的干预为止。

在计算机执行指令过程中有两种信息在流动：**数据流**和**控制流**。数据流包括原始数据、中间结果、结果数据和源程序等，这些信息从存储器读入运算器进行运算，所得的计算结果再存入存储器或传送到输出设备。控制流是由控制器对指令进行分析、解释后向各部件发出控制命令，指挥各部件协调地工作。

### 2.指令及指令系统

指令是一种能被计算机识别并执行的二进制代码，它规定了计算机能完成的某一种操作。一条指令通常由**操作码**和**操作数**两部分组成。

（1）操作码：指明该指令要完成的操作类型或性质，如加、减、取数或输出数据等。

（2）操作数：指明操作对象的内容或所在的单元地址，大多数情况下操作数是地址码。

通常一台计算机有许多条作用不同的指令，所有指令的集合称为该计算机的**指令系统**。

|      指令      | 说明                                                         |
| :------------: | ------------------------------------------------------------ |
| 数据传送型指令 | 实现主存和寄存器之间，或寄存器和寄存器之间的数据传送         |
| 数据处理型指令 | 用于定点数或浮点数的算数运算和逻辑运算                       |
| 程序控制型指令 | 用于控制程序的流向                                           |
| 输入输出型指令 | 用于主机与外设之间交换信息                                   |
|    其他指令    | 除以上各类指令外较少被用到的一些指令，包括字符串操作指令、堆栈指令、停机指令等 |

不同种类的计算机，其指令系统的指令数目与格式也不相同。CPU的指令系统反映了计算机对数据进行处理的能力。

根据指令系统设计架构不同，产生了复杂指令系统计算机（Complex Instruction Set Computer,CISC）和精简指令系统计算机（Reduces Instruction Set Computer,RISC）

### 3.指令的执行过程

按照存储程序的原理，计算机在执行程序时必须先将要执行的相关程序和数据放入内存储器中，在执行程序时CPU根据当前程序指令寄存器的内容取出指令并执行指令，然后再取出下一条指令并执行，如此循环下去直到程序结束指令才停止执行。整个工作过程就是不断地取指令和执行指令，最后将计算结果放入指令指定的存储器地址中。

指令执行过程中所涉及的部件主要有**程序计数器**、**指令寄存器**、**指令译码器**、**通用寄存器**和**运算器**等。

一条指令的执行过程按时间顺序可以分为以下几个步骤：

**（1）取指令。**

**（2）分析指令及取操作数。**

**（3）执行指令。**

**（4）写回数据及转下条指令。**